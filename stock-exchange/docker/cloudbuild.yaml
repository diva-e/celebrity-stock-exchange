steps:
  # Install Angular
  - name: 'gcr.io/cloud-builders/npm'
    dir: 'stock-exchange'
    args: ['install','-g','@angular/cli' ]
  # Install Dependencies
  - name: 'gcr.io/cloud-builders/npm'
    dir: 'stock-exchange'
    args: ['install']
  # build Project in mode Prod.
  - name: 'gcr.io/cloud-builders/npm'
    dir: 'stock-exchange'
    args: ['run','ng','build','--prod']
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'build', '-t', 'gcr.io/$PROJECT_ID/frontend', '.' ]
    dir: 'stock-exchange'
images:
  - 'gcr.io/$PROJECT_ID/frontend'
